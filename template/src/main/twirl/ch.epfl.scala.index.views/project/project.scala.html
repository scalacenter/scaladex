@import ch.epfl.scala.index.views.html.main

@import ch.epfl.scala.index.newModel.NewProject
@import ch.epfl.scala.index.newModel.NewRelease
@import ch.epfl.scala.index.model._
@import ch.epfl.scala.index.model.misc._
@import ch.epfl.scala.index.model.release._

@import ch.epfl.scala.index.newModel.NewDependency
@(project: NewProject, artifacts: Seq[NewRelease.ArtifactName], versions: Seq[SemanticVersion],
  targets: Seq[ScalaTarget], release: NewRelease, user: Option[UserInfo],
  canEdit: Boolean, twitterCard: Option[TwitterSummaryCard], releaseCount: Int,
        directDependencies: Seq[NewDependency.Direct], reverseDependency: Seq[NewDependency.Reverse])

@main(title = project.repository.value, showSearch = true, user,
      extraMeta = twitterCard.map(_.toHeadMeta).getOrElse(Nil)) {
  <main id="container-project">
    @headproject(project, artifacts, versions, targets, release, canEdit)
    <div class="container">
      <div class="row">
        <div class="col-md-8">
          <div class="content-project box" id="README" 
            data-organization="@project.reference.organization"
            data-repository="@project.reference.repository">

            @Html(project.githubInfo.flatMap(_.readme).getOrElse(""))
          </div>
        </div>
        <div class="col-md-4">
          <div class="sidebar-project">
            @if(project.dataForm.artifactDeprecations.contains(release.artifactName)) {
            <div class="box">
              <h1>[DEPRECATED]</h1>
            </div>
            }
            @documentation(release, project)
            @badges(release)
            @install(release, project.dataForm.cliArtifacts)
            @release.scastieURL.map(url => scastie(url))
            @project.githubInfo.map(gh => statistic(gh, project.reference.githubRepo, releaseCount, reverseDependency.size))
            @projectContributingInfo(project)
            @project.githubInfo.map(gh => contributors(gh.contributors))
            @license(release)
            @dependencies(project.reference, directDependencies)
            @dependents(release, reverseDependency)
          </div>
        </div>
      </div>
    </div>
  </main>
}
